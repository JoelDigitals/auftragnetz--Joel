{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto p-6">
  <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100">
    Deine Chats
  </h2>

  {% if chats %}
    <ul class="space-y-4">
      {% for chat in chats %}
        <li>
          <a href="{% url 'chat_detail' chat.pk %}" 
             class="flex items-center justify-between p-4 rounded-xl 
                    bg-white dark:bg-gray-800 shadow-sm 
                    hover:shadow-md transition duration-200">
            <div class="flex flex-col">
              <p class="font-semibold text-gray-900 dark:text-gray-100">
                {% for user in chat.participants.all %}
                  {% if user != request.user %}
                    {{ user.username }}
                  {% endif %}
                {% endfor %}
              </p>
              <p class="text-gray-500 dark:text-gray-400 text-sm truncate max-w-xs">
                {% if chat.messages.last %}
                  {{ chat.messages.last.content }}
                {% else %}
                  <span class="italic text-gray-400 dark:text-gray-500">
                    Keine Nachrichten
                  </span>
                {% endif %}
              </p>
            </div>
            <span class="text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap ml-4">
              {% if chat.updated_at %}
                {{ chat.updated_at|date:"H:i d.m.Y" }}
              {% endif %}
            </span>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
      <p class="text-lg font-medium">Keine Chats vorhanden</p>
      <p class="text-sm">Starte einen neuen Chat mit einem Kollegen ğŸš€</p>
    </div>
  {% endif %}
</div>
{% endblock %}
